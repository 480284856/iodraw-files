<mxGraphModel dx="1178" dy="629" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="mTQriZXTMnpWmK3H0AeE-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="mTQriZXTMnpWmK3H0AeE-1" target="mTQriZXTMnpWmK3H0AeE-3"><mxGeometry relative="1" as="geometry"><mxPoint x="410" y="340" as="targetPoint"/></mxGeometry></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="mTQriZXTMnpWmK3H0AeE-1" target="mTQriZXTMnpWmK3H0AeE-5"><mxGeometry relative="1" as="geometry"><mxPoint x="410" y="480" as="targetPoint"/></mxGeometry></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="mTQriZXTMnpWmK3H0AeE-1" target="mTQriZXTMnpWmK3H0AeE-7"><mxGeometry relative="1" as="geometry"><mxPoint x="310" y="415" as="targetPoint"/></mxGeometry></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="mTQriZXTMnpWmK3H0AeE-1" target="mTQriZXTMnpWmK3H0AeE-8"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-1" value="Agent" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="360" y="390" width="100" height="50" as="geometry"/></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;" edge="1" parent="1" source="mTQriZXTMnpWmK3H0AeE-8" target="mTQriZXTMnpWmK3H0AeE-27"><mxGeometry relative="1" as="geometry"><mxPoint x="650" y="415" as="targetPoint"/></mxGeometry></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-8" value="提示词设计" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="510" y="390" width="100" height="50" as="geometry"/></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="mTQriZXTMnpWmK3H0AeE-3" target="mTQriZXTMnpWmK3H0AeE-11"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="mTQriZXTMnpWmK3H0AeE-3" target="mTQriZXTMnpWmK3H0AeE-13"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-3" value="参考资料" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="360" y="310" width="100" height="50" as="geometry"/></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;" edge="1" parent="1" source="mTQriZXTMnpWmK3H0AeE-13" target="mTQriZXTMnpWmK3H0AeE-25"><mxGeometry relative="1" as="geometry"><mxPoint x="490" y="190" as="targetPoint"/></mxGeometry></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-13" value="文本数据库" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="440" y="220" width="100" height="50" as="geometry"/></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;" edge="1" parent="1" source="mTQriZXTMnpWmK3H0AeE-11" target="mTQriZXTMnpWmK3H0AeE-23"><mxGeometry relative="1" as="geometry"><mxPoint x="330" y="170" as="targetPoint"/></mxGeometry></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-11" value="聊天记录" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="280" y="220" width="100" height="50" as="geometry"/></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;" edge="1" parent="1" source="mTQriZXTMnpWmK3H0AeE-5" target="mTQriZXTMnpWmK3H0AeE-29"><mxGeometry relative="1" as="geometry"><mxPoint x="410" y="560" as="targetPoint"/></mxGeometry></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-5" value="&lt;span style=&quot;text-align: left&quot;&gt;代码运行&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="360" y="480" width="100" height="40" as="geometry"/></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="mTQriZXTMnpWmK3H0AeE-7" target="mTQriZXTMnpWmK3H0AeE-15"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="mTQriZXTMnpWmK3H0AeE-7" target="mTQriZXTMnpWmK3H0AeE-19"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-7" value="外部工具" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="220" y="392.5" width="100" height="45" as="geometry"/></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-19" value="天气查询" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="50" y="425" width="100" height="45" as="geometry"/></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-15" value="高德打车" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="50" y="360" width="100" height="45" as="geometry"/></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-23" value="User：我叫马云&lt;br&gt;Bot：你好马云&lt;br&gt;&lt;br&gt;User：我叫什么？" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1"><mxGeometry x="265" y="110" width="130" height="70" as="geometry"/></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-25" value="1. 西游记第一回：xxx&lt;br&gt;2. 西游记第二回：xxx&lt;br&gt;3. 西游记第三回：xxx" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1"><mxGeometry x="407.5" y="90" width="165" height="90" as="geometry"/></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-27" value="你是一位贴心的管家。你擅长借助工具完成各种各样的任务。&lt;br&gt;&lt;br&gt;工具信息：&lt;br&gt;{tool_info}&lt;br&gt;&lt;br&gt;任务：&lt;br&gt;{task}" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1"><mxGeometry x="640" y="343.75" width="180" height="142.5" as="geometry"/></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-29" value="运行高德打车API：&lt;br&gt;打车函数(A空间P4员工区, 灵隐寺)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1"><mxGeometry x="310" y="560" width="200" height="40" as="geometry"/></mxCell><mxCell id="mTQriZXTMnpWmK3H0AeE-30" value="我们的解决方案遵循行业标准设计，可以从外部工具、参考资料、提示词设计以及代码运行等四个维度来展开。&lt;br&gt;外部工具指的是互联网上各种各样的API，比如天气查询API，能够根据提供的地址，返回该地址的天气信息。当我们需要大模型帮我们完成某件事时，而且这件事刚好可以通过使用外部工具来完成这件任务时，就可以调用这个工具来完成任务。当然，我们的解决方案还可以自定义工具，旨在适应不同场景下的任务需求。比如上图的高德打车就是一个自定义工具，如果大模型需要调用这个工具来帮我们打车，我们就需要通过自然语言的方式向大模型提供出发地点以及终点，当然，在这个工具中，我们还会调用高德地图的API，以实现把用户提供的模糊地址精准化。&lt;br&gt;参考资料指的是大模型在推理前可以参考的资料，这个资料可以是当前正在聊天的聊天记录，也可以是预先存储好的文本数据库里的数据。以聊天记录为例，我们只需要把聊天记录与当前问题一并当作输入，送入到大模型里，大模型便可以参考聊天记录了，如上图中的聊天记录框指向的文本所示，因为用户先前发送给大模型一条消息“我是马云”，然后又问大模型“我叫什么？”，如果把之前的聊天记录也发送给大模型，那么大模型基本上就能够回复“你是马云”之类的回复了。关于如何把聊天记录连同问题一并发送给大模型，简单来说就是在问题字符串前，拼接聊天记录字符串即可。&lt;br&gt;提示词设计，也就是Prompt工程，其设计结果是大模型的整个输入模板，如上图中的“提示词设计”框所指的文本所示。之前提到的把聊天记录连同问题一并发送给大模型，具体来说则是通过把聊天记录嵌入到这个提示词设计结果的模板里，比如可以把上述模板中的&quot;{tool_info}&quot;字符替换为聊天记录，而“{task}”则替换为当前问题。提示词设计质量与最终回复息息相关，虽然不怎么涉及编程，但却直接决定着最终的输出质量。&lt;br&gt;最后的“代码运行”则是指在设计大模型推理流程时，除了推理-输出文本的代码外，还额外添加了API调用的代码，正是这段额外的“API调用”代码，让大模型有了执行任务的能力。以高德打车工具为例，如果我们需要大模型帮我们打车，而且大模型根据我们的意图，成功识别到是要打车，于是在输出调用高德打车API的调用信息后（输出“打车函数(A空间P4员工区, 灵隐寺)”），会把“打车函数，A空间P4员工区, 灵隐寺”这三个参数发送到“API调用”代码，“API调用”代码就会执行这个打车的API调用。" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1"><mxGeometry x="532.5" y="480" width="407.5" height="550" as="geometry"/></mxCell></root></mxGraphModel>